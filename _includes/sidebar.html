<nav class="c-textbook__sidebar">
  <ul class="c-sidebar__chapters">
    {% for chapter in site.data.toc %}
      {% if chapter.divider %}
        <li class="c-sidebar__divider"></li>
      {% else %}
        {% assign entry_class = "c-sidebar__entry" %}
        {% if chapter.url == page.url %}
          {% assign entry_class = "c-sidebar__entry c-sidebar__entry--active" %}
        {% endif %}

        <li class="c-sidebar__chapter">
          <a class="{{ entry_class }}" href="{{ chapter.url }}">
            {{ chapter.title }}
          </a>

          {% if chapter.sections %}
            <ul class="c-sidebar__sections">
              {% for section in chapter.sections %}
                {% assign entry_class = "c-sidebar__entry" %}
                {% if section.url == page.url %}
                  {% assign entry_class = "c-sidebar__entry c-sidebar__entry--active" %}
                {% endif %}

                <li class="c-sidebar__section">
                  <a class="{{ entry_class }}" href="{{ section.url }}">
                    {{ section.title }}
                  </a>
                </li>
              {% endfor %}
            </ul>
          {% endif %}
        </li>
      {% endif %}
    {% endfor %}
  </ul>
</nav>
