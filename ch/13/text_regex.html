
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>13.3. Regular Expressions &#8212; Learning Data Science</title>
    
  <link href="../../_static/css/theme.css" rel="stylesheet">
  <link href="../../_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../../_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/togglebutton.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/custom.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../_static/sphinx-book-theme.d59cb220de22ca1c485ebbdc042f0030.js"></script>
    <script async="async" src="https://unpkg.com/thebe@0.5.1/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="../../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="13.4. Text Analysis" href="text_sotu.html" />
    <link rel="prev" title="13.2. String Manipulation" href="text_strings.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
<script async="" src="https://www.google-analytics.com/analytics.js"></script>
<script>
                        window.ga = window.ga || function () {
                            (ga.q = ga.q || []).push(arguments) };
                        ga.l = +new Date;
                        ga('create', 'UA-113006011-1', 'auto');
                        ga('set', 'anonymizeIp', true);
                        ga('send', 'pageview');
                    </script>

  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../../index.html">
      
      
      
      <h1 class="site-logo" id="site-title">Learning Data Science</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <p class="caption">
 <span class="caption-text">
  Frontmatter
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../preface.html">
   To the Data 100 Student
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../prereqs.html">
   Prerequisites
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../notation.html">
   Notation
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  The Data Science Lifecycle
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../01/lifecycle_intro.html">
   1. The Data Science Lifecycle
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../01/lifecycle_cycle.html">
     1.1. The Stages of the Lifecycle
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../01/lifecycle_map.html">
     1.2. Examples of the Lifecycle
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../01/lifecycle_summary.html">
     1.3. Summary
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../02/data_scope_intro.html">
   2. Questions and Data Scope
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../02/data_scope_big_data_hubris.html">
     2.1. Big Data and New Opportunities
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../02/data_scope_construct.html">
     2.2. Target Population, Access Frame, Sample
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../02/data_scope_protocols.html">
     2.3. Instruments and Protocols
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../02/data_scope_natural.html">
     2.4. Measuring Natural Phenomenon
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../02/data_scope_accuracy.html">
     2.5. Accuracy
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../02/data_scope_summary.html">
     2.6. Summary
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../03/theory_intro.html">
   3. Simulation and Data Design
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../03/theory_urn.html">
     3.1. The Urn Model
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../03/theory_election.html">
     3.2. Example: Simulating Election Poll Bias and Variance
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../03/theory_vaccine_efficacy.html">
     3.3. Example: Simulating a Randomized Trial for a Vaccine
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../03/theory_measurement_error.html">
     3.4. Example: Measuring Air Quality
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../03/theory_summary.html">
     3.5. Summary
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../04/modeling_intro.html">
   4. Modeling with Summary Statistics
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
  <label for="toctree-checkbox-4">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../04/modeling_simple.html">
     4.1. The Constant Model
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../04/modeling_loss_functions.html">
     4.2. Minimizing Loss
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../04/modeling_summary.html">
     4.3. Summary
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../05/bus_intro.html">
   5. Case Study: Why is my Bus Always Late?
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
  <label for="toctree-checkbox-5">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../05/bus_scope.html">
     5.1. Question and Scope
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../05/bus_clean.html">
     5.2. Data Wrangling
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../05/bus_eda.html">
     5.3. Exploring Bus Times
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../05/bus_modeling.html">
     5.4. Modeling Wait Times
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../05/bus_summary.html">
     5.5. Summary
    </a>
   </li>
  </ul>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Rectangular Data
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../06/pandas_intro.html">
   6. Working With Dataframes Using pandas
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/>
  <label for="toctree-checkbox-6">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../06/pandas_subsetting.html">
     6.1. Subsetting
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../06/pandas_aggregating.html">
     6.2. Aggregating
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../06/pandas_joining.html">
     6.3. Joining
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../06/pandas_transforming.html">
     6.4. Transforming
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../06/pandas_other_reps.html">
     6.5. How are Dataframes Different from Other Data Representations?
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../06/pandas_summary.html">
     6.6. Summary
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../07/sql_intro.html">
   7. Working With Relations Using SQL
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/>
  <label for="toctree-checkbox-7">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../07/sql_subsetting.html">
     7.1. Subsetting
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../07/sql_aggregating.html">
     7.2. Aggregating
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../07/sql_joining.html">
     7.3. Joining
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../07/sql_transforming.html">
     7.4. Transforming
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../07/sql_other_reps.html">
     7.5. How are Relations Different from Other Data Representations?
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../07/sql_summary.html">
     7.6. Summary
    </a>
   </li>
  </ul>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Understanding The Data
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../08/files_intro.html">
   8. Wrangling Files
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/>
  <label for="toctree-checkbox-8">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../08/files_datasets.html">
     8.1. Data Source Examples
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../08/files_formats.html">
     8.2. File Formats
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../08/files_encoding.html">
     8.3. File Encoding
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../08/files_size.html">
     8.4. File Size
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../08/files_command_line.html">
     8.5. The Shell and Command Line Tools
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../08/files_granularity.html">
     8.6. Table Shape and Granularity
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../08/files_summary.html">
     8.7. Summary
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../09/wrangling_intro.html">
   9. Wrangling Dataframes
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/>
  <label for="toctree-checkbox-9">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../09/wrangling_co2.html">
     9.1. Example: Wrangling CO2 Measurements from Mauna Loa Observatory
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../09/wrangling_checks.html">
     9.2. Quality Checks
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../09/wrangling_missing.html">
     9.3. Missing Values and Records
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../09/wrangling_transformations.html">
     9.4. Transformations and Timestamps
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../09/wrangling_structure.html">
     9.5. Modifying Structure
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../09/wrangling_restaurants.html">
     9.6. Example: Wrangling Restaurant Safety Violations
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../09/wrangling_summary.html">
     9.7. Summary
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../10/eda_intro.html">
   10. Exploratory Data Analysis
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/>
  <label for="toctree-checkbox-10">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../10/eda_feature_types.html">
     10.1. Feature Types
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../10/eda_distributions.html">
     10.2. What to Look For in a Distribution
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../10/eda_relationships.html">
     10.3. What to Look For in a Relationship
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../10/eda_multi.html">
     10.4. Comparisons in Multivariate Settings
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../10/eda_guidelines.html">
     10.5. Guidelines for Exploration
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../10/eda_example.html">
     10.6. Example: Sale Prices for Houses
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../10/eda_summary.html">
     10.7. Summary
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../11/viz_intro.html">
   11. Data Visualization
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" type="checkbox"/>
  <label for="toctree-checkbox-11">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../11/viz_scale.html">
     11.1. Choosing Scale to Reveal Structure
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../11/viz_smoothing.html">
     11.2. Smoothing and Aggregating Data
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../11/viz_comparisons.html">
     11.3. Facilitating Meaningful Comparisons
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../11/viz_data_design.html">
     11.4. Incorporating the Data Design
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../11/viz_context.html">
     11.5. Adding Context
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../11/viz_plotly.html">
     11.6. Creating Plots Using
     <code class="docutils literal notranslate">
      <span class="pre">
       plotly
      </span>
     </code>
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../11/viz_other_tools.html">
     11.7. Other Tools for Visualization
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../11/viz_summary.html">
     11.8. Summary
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../12/pa_intro.html">
   12. Case Study: How Accurate are Air Quality Measurements?
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" type="checkbox"/>
  <label for="toctree-checkbox-12">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../12/pa_scope.html">
     12.1. Question, Design, and Scope
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../12/pa_collocated.html">
     12.2. Finding Collocated Sensors
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../12/pa_cleaning_aqs.html">
     12.3. Wrangling and Cleaning AQS Sensor Data
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../12/pa_cleaning_purpleair.html">
     12.4. Wrangling PurpleAir Sensor Data
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../12/pa_eda.html">
     12.5. Exploring PurpleAir and AQS Measurements
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../12/pa_modeling.html">
     12.6. Creating a Model to Correct PurpleAir Measurements
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../12/pa_conclusion.html">
     12.7. Summary
    </a>
   </li>
  </ul>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Other Data Sources
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="text_intro.html">
   13. Working with Text
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" type="checkbox"/>
  <label for="toctree-checkbox-13">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="text_examples.html">
     13.1. Examples of Text and Tasks
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="text_strings.html">
     13.2. String Manipulation
    </a>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     13.3. Regular Expressions
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="text_sotu.html">
     13.4. Text Analysis
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="text_summary.html">
     13.5. Summary
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../14/web_intro.html">
   14. Data Exchange
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" type="checkbox"/>
  <label for="toctree-checkbox-14">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../14/web_netCDF.html">
     14.1. NetCDF Data
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../14/web_json.html">
     14.2. JSON Data
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../14/web_http.html">
     14.3. HTTP
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../14/web_rest.html">
     14.4. [In Progress] REST
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../14/web_html.html">
     14.5. [In Progress] XPath and HTML
    </a>
   </li>
  </ul>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Linear Modeling
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../15/linear_intro.html">
   15. Linear Models
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" type="checkbox"/>
  <label for="toctree-checkbox-15">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../15/linear_simple.html">
     15.1. Simple Linear Model
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../15/linear_pa.html">
     15.2. Example: A Simple Linear Model for Air Quality
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../15/linear_simple_fit.html">
     15.3. Fitting the Simple Linear Model
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../15/linear_multi.html">
     15.4. Multiple Linear Model
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../15/linear_multi_fit.html">
     15.5. Fitting the Multiple Linear Model
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../15/linear_case.html">
     15.6. Example: Where is the Land of Opportunity?
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../15/linear_feature_eng.html">
     15.7. Feature Engineering for Numeric Measurements
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../15/linear_categorical.html">
     15.8. Feature Engineering for Categorical Measurements
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../15/linear_summary.html">
     15.9. Summary
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../16/ms_intro.html">
   16. Model Selection
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-16" name="toctree-checkbox-16" type="checkbox"/>
  <label for="toctree-checkbox-16">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../16/ms_overfitting.html">
     16.1. Overfitting
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../16/ms_train_test.html">
     16.2. Train-Test Split
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../16/ms_cv.html">
     16.3. Cross-Validation
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../16/ms_regularization.html">
     16.4. Regularization
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../16/ms_risk.html">
     16.5. Model Bias and Variance
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../16/ms_summary.html">
     16.6. Summary
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../17/inf_pred_gen_intro.html">
   17. Theory for Inference and Prediction
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-17" name="toctree-checkbox-17" type="checkbox"/>
  <label for="toctree-checkbox-17">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../17/inf_pred_gen_dist.html">
     17.1. Distributions: Population, Empirical, Sampling
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../17/inf_pred_gen_HT.html">
     17.2. Basics of Hypothesis Testing
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../17/inf_pred_gen_boot.html">
     17.3. Bootstrapping for Inference
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../17/inf_pred_gen_CI.html">
     17.4. Basics of Confidence Intervals
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../17/inf_pred_gen_PI.html">
     17.5. Basics of Prediction Intervals
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../17/inf_pred_gen_prob.html">
     17.6. Probability for Inference and Prediction
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../17/inf_pred_gen_summary.html">
     17.7. Summary
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../18/donkey_intro.html">
   18. Case Study: How to Weigh a Donkey
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-18" name="toctree-checkbox-18" type="checkbox"/>
  <label for="toctree-checkbox-18">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../18/donkey_scope.html">
     18.1. Donkey Study Question and Scope
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../18/donkey_clean.html">
     18.2. Wrangling and Transforming
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../18/donkey_eda.html">
     18.3. Exploring
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../18/donkey_model.html">
     18.4. Modeling a Donkey’s Weight
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../18/donkey_summary.html">
     18.5. Summary
    </a>
   </li>
  </ul>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Classification
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../19/classification_intro.html">
   19. Classification
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-19" name="toctree-checkbox-19" type="checkbox"/>
  <label for="toctree-checkbox-19">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../19/classification_prob.html">
     19.1. Regression on Probabilities
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../19/classification_log_model.html">
     19.2. The Logistic Model
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../19/classification_cost.html">
     19.3. A Loss Function for the Logistic Model
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../19/classification_log_reg.html">
     19.4. Using Logistic Regression
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../19/classification_cost_justification.html">
     19.5. Approximating the Empirical Probability Distribution
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../19/classification_sgd.html">
     19.6. Fitting a Logistic Model
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../19/classification_sensitivity_specificity.html">
     19.7. Evaluating Logistic Models
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../19/classification_multiclass.html">
     19.8. Multiclass Classification
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../20/gd_intro.html">
   20. Numerical Optimization
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-20" name="toctree-checkbox-20" type="checkbox"/>
  <label for="toctree-checkbox-20">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../20/gd_basics.html">
     20.1. Gradient Descent Basics
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../20/gd_example.html">
     20.2. Minimizing Huber Loss
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../20/gd_convex.html">
     20.3. Convex and Differentiable Loss Functions
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../20/gd_alternative.html">
     20.4. Variants of Gradient Descent
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../20/gd_summary.html">
     20.5. Summary
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../21/fake_news_intro.html">
   21. Case Study: Detecting Fake News
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-21" name="toctree-checkbox-21" type="checkbox"/>
  <label for="toctree-checkbox-21">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../21/fake_news_question.html">
     21.1. Question and Scope
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../21/fake_news_data.html">
     21.2. Obtaining and Wrangling the Data
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../21/fake_news_exploring.html">
     21.3. Exploring the Data
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../21/fake_news_modeling.html">
     21.4. Modeling
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../21/fake_news_summary.html">
     21.5. Summary
    </a>
   </li>
  </ul>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Appendices
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../a01/prob_review.html">
   Probability Review
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../a02/vector_space_review.html">
   Vector Space Review
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../a03/hyp_intro.html">
   Statistical Inference Review
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-22" name="toctree-checkbox-22" type="checkbox"/>
  <label for="toctree-checkbox-22">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../a03/hyp_introduction.html">
     Hypothesis Testing and Confidence Intervals
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../a03/hyp_introduction_part2.html">
     Permutation Test
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../a04/ref_intro.html">
   Reference Tables
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-23" name="toctree-checkbox-23" type="checkbox"/>
  <label for="toctree-checkbox-23">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../a04/ref_pandas.html">
     pandas
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../a04/ref_seaborn.html">
     Seaborn
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../a04/ref_matplotlib.html">
     matplotlib
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../a04/ref_sklearn.html">
     scikit-learn
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../a05/bias_intro.html">
   The Bias-Variance Tradeoff
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-24" name="toctree-checkbox-24" type="checkbox"/>
  <label for="toctree-checkbox-24">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../a05/bias_risk.html">
     Risk and Loss Minimization
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../a05/bias_modeling.html">
     Model Bias and Variance
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../a05/bias_cv.html">
     Cross-Validation
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../a06/reg_intro.html">
   Regularization
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-25" name="toctree-checkbox-25" type="checkbox"/>
  <label for="toctree-checkbox-25">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../a06/reg_intuition.html">
     Regularization Intuition
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../a06/reg_ridge.html">
     L2 Regularization: Ridge Regression
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../a06/reg_lasso.html">
     L1 Regularization: Lasso Regression
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../a07/repl_intro.html">
   Replicable Research
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-26" name="toctree-checkbox-26" type="checkbox"/>
  <label for="toctree-checkbox-26">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../a07/repl_phacking.html">
     P-hacking
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../a08/pca_intro.html">
   Dimensionality Reduction and PCA
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-27" name="toctree-checkbox-27" type="checkbox"/>
  <label for="toctree-checkbox-27">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../a08/pca_dims.html">
     Dimensions of a Data Table
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../a08/pca_svd.html">
     PCA using the Singular Value Decomposition
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../a08/pca_in_practice.html">
     PCA in Practice
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../a09/dtrees_intro.html">
   Decision Trees and Random Forests
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../a10/clustering_intro.html">
   Clustering
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../a11/contributors.html">
   Contributors
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../references.html">
   References
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../../_sources/ch/13/text_regex.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
                onclick="printPdf(this)" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        
        <a class="jupyterhub-button" href="https://datahub.berkeley.edu/hub/user-redirect/git-pull?repo=https://github.com/ds-100/textbook&urlpath=tree/textbook/content/ch/13/text_regex.ipynb&branch=master"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch JupyterHub" data-toggle="tooltip"
                data-placement="left"><img class="jupyterhub-button-logo"
                    src="../../_static/images/logo_jupyterhub.svg"
                    alt="Interact on JupyterHub">JupyterHub</button></a>
        
        
        
    </div>
</div>

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show noprint">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#concatenation-of-literals">
   13.3.1. Concatenation of Literals
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#quantifiers">
   13.3.2. Quantifiers
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#alternation-and-grouping-to-create-features">
   13.3.3. Alternation and Grouping to Create Features
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#reference-tables">
   13.3.4. Reference Tables
  </a>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Regular Expressions</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#concatenation-of-literals">
   13.3.1. Concatenation of Literals
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#quantifiers">
   13.3.2. Quantifiers
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#alternation-and-grouping-to-create-features">
   13.3.3. Alternation and Grouping to Create Features
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#reference-tables">
   13.3.4. Reference Tables
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            
              <div>
                
  <div class="section" id="regular-expressions">
<h1><span class="section-number">13.3. </span>Regular Expressions<a class="headerlink" href="#regular-expressions" title="Permalink to this headline">¶</a></h1>
<p><em>Regular expressions</em> (or <em>regex</em> for short) are special patterns that we use
to extract parts of strings.
Think about the format of a Social Security Number (SSN) like <code class="docutils literal notranslate"><span class="pre">134-42-2012</span></code>.
To describe this format, we
might say that SSNs consist of three digits, then a dash, two digits, another
dash, then four digits. Regexes let us capture this pattern in code. For
instance, a simple regex for SSNs could look like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">...-..-....</span>
</pre></div>
</div>
<p>Although we haven’t yet introduced the syntax and special characters associated
with regular expressions, or even how to “parse” them, you can probably make
sense of the pattern above. It follows closely the written description of a SSN
that we just gave. The syntax of regular expressions is fortunately quite
simple to learn; we introduce nearly all of the syntax in this section alone.</p>
<p>As we introduce the concepts, we tackle some of the examples described in an
earlier section, and show how to carry out the tasks with regular expressions.
Almost all programming languages have a library to match patterns using regular
expressions, making regular expressions useful regardless of the specific
programming language. We use some of the common methods available in the Python
built-in <code class="docutils literal notranslate"><span class="pre">re</span></code> module to accomplish the tasks from the examples. These methods
are summarized in a table at the end of this section, where the basic usage and
return value are briefly described. Since we only cover a few of the most
commonly used methods, you may find it useful to consult <a class="reference external" href="https://docs.python.org/3/library/re.html">the official
documentation on the <code class="docutils literal notranslate"><span class="pre">re</span></code> module</a> as well.</p>
<p>Regular expressions are based on searching a string one character (aka
<em>literal</em>) at a time for a pattern. We call this notion <em>concatenation of
literals</em>.</p>
<div class="section" id="concatenation-of-literals">
<h2><span class="section-number">13.3.1. </span>Concatenation of Literals<a class="headerlink" href="#concatenation-of-literals" title="Permalink to this headline">¶</a></h2>
<p>Concatenation is best explained with a basic example. Suppose we are looking
for the pattern <code class="docutils literal notranslate"><span class="pre">cat</span></code> in the string <code class="docutils literal notranslate"><span class="pre">Scatter!</span></code>. Here’s how a computer matches
literal patterns like <code class="docutils literal notranslate"><span class="pre">cat</span></code>:</p>
<ol class="simple">
<li><p>Begin with the first character in the string (<code class="docutils literal notranslate"><span class="pre">S</span></code>).</p></li>
<li><p>Check whether it matches the first character in the pattern (<code class="docutils literal notranslate"><span class="pre">c</span></code>).</p></li>
<li><p>If there isn’t a match, move onto the next character of the string.</p></li>
<li><p>If there is a match, check the rest of the pattern (<code class="docutils literal notranslate"><span class="pre">a</span></code>, then <code class="docutils literal notranslate"><span class="pre">t</span></code>).</p></li>
<li><p>If the entire pattern matches, report that the pattern was found.</p></li>
</ol>
<p><a class="reference internal" href="#fig-regex-literals"><span class="std std-numref">Figure 13.1</span></a> contains a diagram of
the idea behind this search through the string
one character at a time. The pattern “cat” is found within the word
<code class="docutils literal notranslate"><span class="pre">Scatter!</span></code> in
positions 1-3 in the string. Once you get the hang of this process, you can
move on to the richer set of patterns; they all follow from this basic
paradigm.</p>
<div class="figure align-default" id="fig-regex-literals">
<img alt="../../_images/regex-literals.svg" src="../../_images/regex-literals.svg" /><p class="caption"><span class="caption-number">Fig. 13.1 </span><span class="caption-text">To match literal patterns, the computer moves along the string and checks whether the entire pattern is matched.</span><a class="headerlink" href="#fig-regex-literals" title="Permalink to this image">¶</a></p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In the example above we observe that regular expressions can match patterns
that appear anywhere in the input string. In Python, this behavior differs
depending on the method used to match the regex—some methods only return a
match if the regex appears at the start of the string; some methods return a
match anywhere in the string.</p>
</div>
<p><em>Character Classes</em></p>
<p>We can make patterns more flexible by using a <em>character class</em>
(also known as a <em>character set</em>), which
lets us specify a collection of equivalent characters to match. This allows us
to create more relaxed matches. To create a character class, wrap the set of
desired characters in brackets <code class="docutils literal notranslate"><span class="pre">[</span> <span class="pre">]</span></code>.
For example, the pattern <code class="docutils literal notranslate"><span class="pre">[0123456789]</span></code> means “match any literal
within the brackets”—in this case, any single digit.
Then, the following regular expression matches three digits.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="mi">0123456789</span><span class="p">][</span><span class="mi">0123456789</span><span class="p">][</span><span class="mi">0123456789</span><span class="p">]</span>
</pre></div>
</div>
<p>This is such a commonly used character class that
there is a shorthand notation for the range of digits, <code class="docutils literal notranslate"><span class="pre">[0-9]</span></code>. Character
classes allow us to create a regex for SSNs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="mi">0</span><span class="o">-</span><span class="mi">9</span><span class="p">][</span><span class="mi">0</span><span class="o">-</span><span class="mi">9</span><span class="p">][</span><span class="mi">0</span><span class="o">-</span><span class="mi">9</span><span class="p">]</span><span class="o">-</span><span class="p">[</span><span class="mi">0</span><span class="o">-</span><span class="mi">9</span><span class="p">][</span><span class="mi">0</span><span class="o">-</span><span class="mi">9</span><span class="p">]</span><span class="o">-</span><span class="p">[</span><span class="mi">0</span><span class="o">-</span><span class="mi">9</span><span class="p">][</span><span class="mi">0</span><span class="o">-</span><span class="mi">9</span><span class="p">][</span><span class="mi">0</span><span class="o">-</span><span class="mi">9</span><span class="p">][</span><span class="mi">0</span><span class="o">-</span><span class="mi">9</span><span class="p">]</span>
</pre></div>
</div>
<p>Two other ranges that are commonly used in character classes are <code class="docutils literal notranslate"><span class="pre">[a-z]</span></code> for
lowercase and <code class="docutils literal notranslate"><span class="pre">[A-Z]</span></code> for uppercase letters. We can combine ranges with other
equivalent characters and use partial ranges. For example <code class="docutils literal notranslate"><span class="pre">[a-cX-Z27]</span></code> is
equivalent to the character class, <code class="docutils literal notranslate"><span class="pre">[abcXYZ27]</span></code>.</p>
<p>Let’s return to our original pattern <code class="docutils literal notranslate"><span class="pre">cat</span></code> and modify it to include two character classes:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">c</span><span class="p">[</span><span class="n">oa</span><span class="p">][</span><span class="n">td</span><span class="p">]</span>
</pre></div>
</div>
<p>This pattern matches <code class="docutils literal notranslate"><span class="pre">cat</span></code>, but it also matches <code class="docutils literal notranslate"><span class="pre">cot</span></code>, <code class="docutils literal notranslate"><span class="pre">cad</span></code>, and <code class="docutils literal notranslate"><span class="pre">cod</span></code>:</p>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>  Regex: c[oa][td]
   Text: The <span class=" -Color -Color-Bold -Color-Bold-Black -Color-Bold-Black-BGYellow">cat</span> eats <span class=" -Color -Color-Bold -Color-Bold-Black -Color-Bold-Black-BGYellow">cod</span>, <span class=" -Color -Color-Bold -Color-Bold-Black -Color-Bold-Black-BGYellow">cad</span>s, and <span class=" -Color -Color-Bold -Color-Bold-Black -Color-Bold-Black-BGYellow">cot</span>s, but not coats.
Matches:     ↑↑↑      ↑↑↑  ↑↑↑       ↑↑↑                 
</pre></div>
</div>
</div>
</div>
<p><em>Negated Character Classes</em></p>
<p>A <em>negated character class</em> matches any character
<em>except</em> those between the square brackets. To create a negated character
class, place the caret symbol as the first character after the left sqaure
bracket. For example, <code class="docutils literal notranslate"><span class="pre">[^0-9]</span></code> matches any character except a digit.</p>
<p><em>Wildcard Character</em></p>
<p>When we really don’t care what the literal is, we can specify this with the
period character <code class="docutils literal notranslate"><span class="pre">.</span></code>. This matches any character except a newline.</p>
<p><em>Escaping Meta Characters</em></p>
<p>We have now seen several special characters, called <em>meta characters</em>: <code class="docutils literal notranslate"><span class="pre">[</span></code> and
<code class="docutils literal notranslate"><span class="pre">]</span></code> denote a character class <code class="docutils literal notranslate"><span class="pre">^</span></code> switches to a negated character class, <code class="docutils literal notranslate"><span class="pre">.</span></code>
represents any character, and <code class="docutils literal notranslate"><span class="pre">-</span></code> denotes a range. But, sometimes we might want
to create a pattern that matches one of these literals. When this happens, we
must escape it with a backslash. For example, we can match the literal left
bracket character using the regex <code class="docutils literal notranslate"><span class="pre">\[</span></code>.</p>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>  Regex: \[
   Text: Today is <span class=" -Color -Color-Bold -Color-Bold-Black -Color-Bold-Black-BGYellow">[</span>2022/01/01]
Matches:          ↑           
</pre></div>
</div>
</div>
</div>
<p>Next, we will show how quantifiers can help create a more compact and clear
regular expression for SSNs.</p>
</div>
<div class="section" id="quantifiers">
<h2><span class="section-number">13.3.2. </span>Quantifiers<a class="headerlink" href="#quantifiers" title="Permalink to this headline">¶</a></h2>
<p>To create a regex to match SSNs, we wrote:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="mi">0</span><span class="o">-</span><span class="mi">9</span><span class="p">][</span><span class="mi">0</span><span class="o">-</span><span class="mi">9</span><span class="p">][</span><span class="mi">0</span><span class="o">-</span><span class="mi">9</span><span class="p">]</span><span class="o">-</span><span class="p">[</span><span class="mi">0</span><span class="o">-</span><span class="mi">9</span><span class="p">][</span><span class="mi">0</span><span class="o">-</span><span class="mi">9</span><span class="p">]</span><span class="o">-</span><span class="p">[</span><span class="mi">0</span><span class="o">-</span><span class="mi">9</span><span class="p">][</span><span class="mi">0</span><span class="o">-</span><span class="mi">9</span><span class="p">][</span><span class="mi">0</span><span class="o">-</span><span class="mi">9</span><span class="p">][</span><span class="mi">0</span><span class="o">-</span><span class="mi">9</span><span class="p">]</span>
</pre></div>
</div>
<p>This matches 3 digits, a dash, 2 more digits, a dash, and 4 more digits.</p>
<p>Quantifiers allow us to match multiple consecutive appearances of a literal. We
specify the number of repetitions by placing the number in curly braces <code class="docutils literal notranslate"><span class="pre">{</span> <span class="pre">}</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># We add the `r` character before the quotes to make a raw string, which makes</span>
<span class="c1"># regexes easier to write in Python</span>
<span class="n">ssn_re</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;[0-9]</span><span class="si">{3}</span><span class="s1">-[0-9]</span><span class="si">{2}</span><span class="s1">-[0-9]</span><span class="si">{4}</span><span class="s1">&#39;</span>

<span class="c1"># Python&#39;s builtin re module has methods for matching regexes</span>
<span class="kn">import</span> <span class="nn">re</span>
<span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">ssn_re</span><span class="p">,</span> <span class="s1">&#39;My SSN is 382-34-3840.&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;382-34-3840&#39;]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># The pattern shouldn&#39;t match phone numbers</span>
<span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">ssn_re</span><span class="p">,</span> <span class="s1">&#39;My phone is 382-123-3842.&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[]
</pre></div>
</div>
</div>
</div>
<p>A quantifier always modifies the character or character class to its immediate
left. The following table shows the complete syntax for quantifiers.</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>Quantifier</p></th>
<th class="head"><p>Meaning</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>{m, n}</p></td>
<td><p>Match the preceding character m to n times.</p></td>
</tr>
<tr class="row-odd"><td><p>{m}</p></td>
<td><p>Match the preceding character exactly m times.</p></td>
</tr>
<tr class="row-even"><td><p>{m,}</p></td>
<td><p>Match the preceding character at least m times.</p></td>
</tr>
<tr class="row-odd"><td><p>{,n}</p></td>
<td><p>Match the preceding character at most n times.</p></td>
</tr>
</tbody>
</table>
<p><em>Shorthand Quantifiers</em></p>
<p>Some commonly used quantifiers have a shorthand:</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>Symbol</p></th>
<th class="head"><p>Quantifier</p></th>
<th class="head"><p>Meaning</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">*</span></code></p></td>
<td><p>{0,}</p></td>
<td><p>Match the preceding character 0 or more times</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">+</span></code></p></td>
<td><p>{1,}</p></td>
<td><p>Match the preceding character 1 or more times</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">?</span></code></p></td>
<td><p>{0,1}</p></td>
<td><p>Match the preceding charcter 0 or 1 times</p></td>
</tr>
</tbody>
</table>
<p>We use the <code class="docutils literal notranslate"><span class="pre">*</span></code> character instead of <code class="docutils literal notranslate"><span class="pre">{0,}</span></code> in the following examples.</p>
<p><em>Quantifiers are greedy</em></p>
<p>Quantifiers will return the longest match possible. This sometimes results in
surprising behavior. Since a SSN starts and ends with a digit, we might think
the following shorter regex will be a simpler approach for finding SSNs.  Can
you figure out what went wrong in the matching?</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ssn_re</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;[0-9].+[0-9]&#39;</span>
<span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">ssn_re</span><span class="p">,</span> <span class="s1">&#39;My SSN is 382-34-3842 and hers is 382-34-3333.&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;382-34-3842 and hers is 382-34-3333&#39;]
</pre></div>
</div>
</div>
</div>
<p>In many cases, using a more specific character class prevents these false
“over” matches:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ssn_re</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;[0-9\-]+[0-9]&#39;</span>
<span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">ssn_re</span><span class="p">,</span> <span class="s1">&#39;My SSN is 382-34-3842 and hers is 382-34-3333.&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;382-34-3842&#39;, &#39;382-34-3333&#39;]
</pre></div>
</div>
</div>
</div>
<p>Literal concatenation and quantifiers are two of the core concepts in regular
expressions. Next, we’ll introduce two more core concepts: alternation and grouping.</p>
</div>
<div class="section" id="alternation-and-grouping-to-create-features">
<h2><span class="section-number">13.3.3. </span>Alternation and Grouping to Create Features<a class="headerlink" href="#alternation-and-grouping-to-create-features" title="Permalink to this headline">¶</a></h2>
<p>Character classes let us match multiple options for a single literal.
We can use alternation to match multiple options for a group of literals.
For example, in the food safety example in
<a class="reference internal" href="../09/wrangling_intro.html#ch-wrangling"><span class="std std-numref">Chapter 9</span></a> we marked violations related to
body parts by seeing if the violation had the substring
<code class="docutils literal notranslate"><span class="pre">hand</span></code>, <code class="docutils literal notranslate"><span class="pre">nail</span></code>, <code class="docutils literal notranslate"><span class="pre">hair</span></code>, or <code class="docutils literal notranslate"><span class="pre">glove</span></code>.
We can use the <code class="docutils literal notranslate"><span class="pre">|</span></code> character in a regex to specify this alteration:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">body_re</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;hand|nail|hair|glove&quot;</span>
<span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">body_re</span><span class="p">,</span> <span class="s2">&quot;unclean hands or improper use of gloves&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;hand&#39;, &#39;glove&#39;]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">body_re</span><span class="p">,</span> <span class="s2">&quot;Unsanitary employee garments hair or nails&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;hair&#39;, &#39;nail&#39;]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">log_entry</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;169.237.46.168 - - [26/Jan/2004:10:47:58 -0800]&quot;GET /stat141/Winter04 HTTP/1.1&quot; 301 328 &quot;http://anson.ucdavis.edu/courses&quot;&quot;Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.0; .NET CLR 1.1.4322)&quot;&#39;
</pre></div>
</div>
</div>
</div>
<p><em>Grouping using parentheses</em></p>
<p>Every set of parentheses
specifies a <em>regex group</em>, which allows us to extract parts of a pattern.
For example, we can use groups to extract the day, month, year, and time from
the web server log entry.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># This pattern matches the entire timestamp</span>
<span class="n">time_re</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;\[[0-9]</span><span class="si">{2}</span><span class="s2">/[a-zA-z]</span><span class="si">{3}</span><span class="s2">/[0-9]</span><span class="si">{4}</span><span class="s2">:[0-9:\- ]*\]&quot;</span>
<span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">time_re</span><span class="p">,</span> <span class="n">log_entry</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;[26/Jan/2004:10:47:58 -0800]&#39;]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Same regex, but we use parens to make regex groups...</span>
<span class="n">time_re</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;\[([0-9]</span><span class="si">{2}</span><span class="s2">)/([a-zA-z]</span><span class="si">{3}</span><span class="s2">)/([0-9]</span><span class="si">{4}</span><span class="s2">):([0-9:\- ]*)\]&quot;</span>

<span class="c1"># ...which tells findall() to split up the match into its groups</span>
<span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">time_re</span><span class="p">,</span> <span class="n">log_entry</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[(&#39;26&#39;, &#39;Jan&#39;, &#39;2004&#39;, &#39;10:47:58 -0800&#39;)]
</pre></div>
</div>
</div>
</div>
<p>As we can see, <code class="docutils literal notranslate"><span class="pre">re.findall</span></code> returns a list of tuples containing the individual
components of the date and time of the web log.</p>
<p>We have introduced a lot of terminology, so
in the next section we’ll bring it all together into a set of tables for easy
reference.</p>
</div>
<div class="section" id="reference-tables">
<h2><span class="section-number">13.3.4. </span>Reference Tables<a class="headerlink" href="#reference-tables" title="Permalink to this headline">¶</a></h2>
<p>We conclude this section with a few tables that summarize order of
operation, meta characters, and shorthands for character classes.
We also provide tables summarizing the handful of methods in the <code class="docutils literal notranslate"><span class="pre">re</span></code>
Python library that we have used in this section.</p>
<p>The four basic operations for regular expressions, concatenation, quantifying,
alternation, and grouping have an order of precedence, which we make explicit
in the table below.</p>
<table class="colwidths-auto table" id="regex-order">
<caption><span class="caption-number">Table 13.1 </span><span class="caption-text">Order of Operaions</span><a class="headerlink" href="#regex-order" title="Permalink to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Operation</p></th>
<th class="head"><p>Order</p></th>
<th class="head"><p>Example</p></th>
<th class="head"><p>Matches</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>concatenation</p></td>
<td><p>3</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">cat</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">cat</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>alternation</p></td>
<td><p>4</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">cat\|mouse</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">cat</span></code> and <code class="docutils literal notranslate"><span class="pre">mouse</span></code></p></td>
</tr>
<tr class="row-even"><td><p>quantifying</p></td>
<td><p>2</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">cat?</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">ca</span></code> and <code class="docutils literal notranslate"><span class="pre">cat</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>grouping</p></td>
<td><p>1</p></td>
<td><p>c(at)?</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">c</span></code> and <code class="docutils literal notranslate"><span class="pre">cat</span></code></p></td>
</tr>
</tbody>
</table>
<p>The following table provides a list of the meta characters introduced in this
section, plus a few more. The column labeled “Doesn’t Match” gives examples of
strings that the example regexes don’t match.</p>
<table class="colwidths-auto table" id="regex-meta">
<caption><span class="caption-number">Table 13.2 </span><span class="caption-text">Meta characters</span><a class="headerlink" href="#regex-meta" title="Permalink to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Char</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Example</p></th>
<th class="head"><p>Matches</p></th>
<th class="head"><p>Doesn’t Match</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>.</p></td>
<td><p>Any character except \n</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">...</span></code></p></td>
<td><p>abc</p></td>
<td><p>ab</p></td>
</tr>
<tr class="row-odd"><td><p>[ ]</p></td>
<td><p>Any character inside brackets</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">[cb.]ar</span></code></p></td>
<td><p>car<br>.ar</p></td>
<td><p>jar</p></td>
</tr>
<tr class="row-even"><td><p>[^ ]</p></td>
<td><p>Any character <em>not</em> inside brackets</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">[^b]ar</span></code></p></td>
<td><p>car<br>par</p></td>
<td><p>bar<br>ar</p></td>
</tr>
<tr class="row-odd"><td><p>*</p></td>
<td><p>≥ 0 or more of previous symbol, shorthand for {0,}</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">[pb]*ark</span></code></p></td>
<td><p>bbark<br>ark</p></td>
<td><p>dark</p></td>
</tr>
<tr class="row-even"><td><p>+</p></td>
<td><p>≥ 1 or more of previous symbol,shorthand for {1,}</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">[pb]+ark</span></code></p></td>
<td><p>bbpark<br>bark</p></td>
<td><p>dark<br>ark</p></td>
</tr>
<tr class="row-odd"><td><p>?</p></td>
<td><p>0 or 1 of previous symbol, shorthand for {0,1}</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">s?he</span></code></p></td>
<td><p>she<br>he</p></td>
<td><p>the</p></td>
</tr>
<tr class="row-even"><td><p>{<em>n</em>}</p></td>
<td><p>Exactly <em>n</em> of previous symbol</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">hello{3}</span></code></p></td>
<td><p>hellooo</p></td>
<td><p>hello</p></td>
</tr>
<tr class="row-odd"><td><p>|</p></td>
<td><p>Pattern before or after bar</p></td>
<td><p><code>we|[ui]s</code></p></td>
<td><p>we<br>us<br>is</p></td>
<td><p>e<br>s</p></td>
</tr>
<tr class="row-even"><td><p>\</p></td>
<td><p>Escape next character</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">\[hi\]</span></code></p></td>
<td><p>[hi]</p></td>
<td><p>hi</p></td>
</tr>
<tr class="row-odd"><td><p>^</p></td>
<td><p>Beginning of line</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">^ark</span></code></p></td>
<td><p>ark two</p></td>
<td><p>dark</p></td>
</tr>
<tr class="row-even"><td><p>$</p></td>
<td><p>End of line</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">ark$</span></code></p></td>
<td><p>noahs ark</p></td>
<td><p>noahs arks</p></td>
</tr>
</tbody>
</table>
<p>Additionally, we provide a table of shorthands for some commonly used character
sets. These shorthands don’t need <code class="docutils literal notranslate"><span class="pre">[</span> <span class="pre">]</span></code>.</p>
<table class="colwidths-auto table" id="regex-shorthand">
<caption><span class="caption-number">Table 13.3 </span><span class="caption-text">Character Class Shorthands</span><a class="headerlink" href="#regex-shorthand" title="Permalink to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Description</p></th>
<th class="head"><p>Bracket Form</p></th>
<th class="head"><p>Shorthand</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Alphanumeric character</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">[a-zA-Z0-9_]</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">\w</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Not an alphanumeric character</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">[^a-zA-Z0-9_]</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">\W</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Digit</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">[0-9]</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">\d</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Not a digit</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">[^0-9]</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">\D</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Whitespace</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">[\t\n\f\r\p{Z}]</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">\s</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Not whitespace</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">[^\t\n\f\r\p{z}]</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">\S</span></code></p></td>
</tr>
</tbody>
</table>
<p>We used the following methods in <code class="docutils literal notranslate"><span class="pre">re</span></code> in this section. The names of the methods
are indicative of the functionality they perform: <em>search</em> or
<em>match</em> a pattern in a
string; <em>find all</em> cases of a pattern in a string; <em>sub</em>stitute all occurrences
of a pattern with a substring, and <em>split</em> a string into pieces at the pattern.
Each, requires a pattern and string to be specified, and some have
extra arguments.
The table below provides the format of the method usage and a
description of the return value.</p>
<table class="colwidths-auto table" id="regex-methods">
<caption><span class="caption-number">Table 13.4 </span><span class="caption-text">Regular Expression Methods</span><a class="headerlink" href="#regex-methods" title="Permalink to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Method</p></th>
<th class="head"><p>Return value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">re.search(pattern,</span> <span class="pre">string)</span></code></p></td>
<td><p>truthy match object if the pattern is found anywhere in the string, otherwise <code class="docutils literal notranslate"><span class="pre">None</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">re.match(pattern,</span> <span class="pre">string)</span></code></p></td>
<td><p>truthy match object if the pattern is found at the beginning of the string, otherwise <code class="docutils literal notranslate"><span class="pre">None</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">re.findall(pattern,</span> <span class="pre">string)</span></code></p></td>
<td><p>list of all matches of <code class="docutils literal notranslate"><span class="pre">pattern</span></code> in <code class="docutils literal notranslate"><span class="pre">string</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">re.sub(pattern,</span> <span class="pre">replacement,</span> <span class="pre">string)</span></code></p></td>
<td><p>string where all occurrences of <code class="docutils literal notranslate"><span class="pre">pattern</span></code> are replaced by  <code class="docutils literal notranslate"><span class="pre">replacement</span></code> in the <code class="docutils literal notranslate"><span class="pre">string</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">re.split(pattern,</span> <span class="pre">string)</span></code></p></td>
<td><p>list of the pieces of <code class="docutils literal notranslate"><span class="pre">string</span></code> around the occurrences of <code class="docutils literal notranslate"><span class="pre">pattern</span></code></p></td>
</tr>
</tbody>
</table>
<p><em>Regex and pandas</em></p>
<p>As seen in the previous section, <code class="docutils literal notranslate"><span class="pre">pandas</span></code> Series objects have a <code class="docutils literal notranslate"><span class="pre">.str</span></code> property
that supports string manipulation using Python string methods. Conveniently,
the <code class="docutils literal notranslate"><span class="pre">.str</span></code> property also supports some functions from the <code class="docutils literal notranslate"><span class="pre">re</span></code> module. The
table below shows the analogous functionality from the above table of the <code class="docutils literal notranslate"><span class="pre">re</span></code>
methods. Each requires a pattern.
See <a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/text.html">the <code class="docutils literal notranslate"><span class="pre">pandas</span></code> docs</a> for a complete list of
string methods.</p>
<table class="colwidths-auto table" id="regex-pandas">
<caption><span class="caption-number">Table 13.5 </span><span class="caption-text">Regular Expressions in Pandas</span><a class="headerlink" href="#regex-pandas" title="Permalink to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Method</p></th>
<th class="head"><p>Return value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">str.contains(pattern)</span></code></p></td>
<td><p>Series of booleans indicating whether the <code class="docutils literal notranslate"><span class="pre">pattern</span></code> is found</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">str.findall(pattern)</span></code></p></td>
<td><p>list of all matches of <code class="docutils literal notranslate"><span class="pre">pattern</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">str.replace(pattern,</span> <span class="pre">replacement)</span></code></p></td>
<td><p>Series with all matching occurrences of <code class="docutils literal notranslate"><span class="pre">pattern</span></code> replaced by <code class="docutils literal notranslate"><span class="pre">replacement</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">str.split(pattern)</span></code></p></td>
<td><p>Series of lists of strings around given <code class="docutils literal notranslate"><span class="pre">pattern</span></code></p></td>
</tr>
</tbody>
</table>
<p>Regular expressions are a powerful tool, but are somewhat notorious for being difficult to read and debug. We close with some advice for regexes.</p>
<ul class="simple">
<li><p>Develop your regular expression on simple test strings to see what the pattern matches.</p></li>
<li><p>If a pattern matches nothing, try weakening it by dropping part of the pattern. Then tighten it incrementally to see how the matching evolves. (Online regex checking tools can be very helpful here).</p></li>
<li><p>Use raw strings whenever possible for cleaner patterns, especially when a pattern includes a backslash.</p></li>
<li><p>When you have lots of long strings, consider using compiled patterns because they can be faster to match (see <code class="docutils literal notranslate"><span class="pre">compile()</span></code> in the <code class="docutils literal notranslate"><span class="pre">re</span></code> library).</p></li>
</ul>
<p>While powerful, regular expressions are terrible at certain types of problems. Don’t use them to:</p>
<ul class="simple">
<li><p>Parse hierarchical structures such as JSON or HTML; use a parser instead.</p></li>
<li><p>Search for complex properties, like palindromes and balanced parentheses.</p></li>
<li><p>Validating a complex feature, such as a valid email address.</p></li>
</ul>
<p>In the next section, we carry out an example text analysis.
We’ll clean the data
using regular expressions and string manipulation, convert the text into
quantitative data, and analyze the text via these derived quantities.</p>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./ch/13"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            
                <!-- Previous / next buttons -->
<div class='prev-next-area'> 
    <a class='left-prev' id="prev-link" href="text_strings.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title"><span class="section-number">13.2. </span>String Manipulation</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="text_sotu.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title"><span class="section-number">13.4. </span>Text Analysis</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            
        </div>
    </div>
    <footer class="footer">
  <p>
    
      By Sam Lau, Joey Gonzalez, and Deb Nolan<br/>
    
        &copy; Copyright 2023.<br/>
      <div class="extra_footer">
        <p>
License: CC BY-NC-ND 4.0
</p>

      </div>
  </p>
</footer>
</main>


      </div>
    </div>
  
  <script src="../../_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>